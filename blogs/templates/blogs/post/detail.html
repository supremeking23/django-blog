{% extends "blogs/base.html" %}
{% load blog_tags %}
{% block title %} {{post.title}} {% endblock %}

{%block content %}

<h1>{{post.title}}</h1>
<p class="date">
	Published {{post.publish}} by {{post.author}}
</p>

<!--- before linebreaks--->
{{post.body|markdown}}

<p>
	<a href="{% url 'blogs:post_share' post.id %}">
		Share this post
	</a>
</p>



{% with comments.count as total_comments %}
<h2>
	{{ total_comments }} comment{{total_comments|pluralize}}
</h2>

{% endwith %}


{% for comment in comments %}

<div class="comment">
	<p class="info">
		comment {{forllop.counter }} by <b>{{comment.name}}</b> <i>{{comment.created}}</i>
	</p>
	{{ comment.body|linebreaks }}
</div>
{% empty %}
<p>There are no comments yet. </p>
{% endfor %}

<h2>Similar Post</h2>
{% for post in similar_posts %}
<p>
	<a href="{{ post.get_absolute_url }}">{{post.title}}</a>
</p>
{% empty %}

There are no similar posts yet.

{% endfor %}


{% if new_comment %}
<h2>Your comment has been added.</h2>


{% else %}
<h2>Add a new comment</h2>

{% load widget_tweaks %}


<form action="." method="POST">
	{% for field in comment_form %}
	<div class="form-group">
		{{field.errors}}
		{{field.label_tag}}
		{% render_field field class="form-control" %}
	</div>
	{% endfor %}
	{% csrf_token %}
	<p><input type="submit" class="btn btn-primary" name="Add comment"></p>
</form>
{% endif %}


{% endblock %}